<%@page import="org.apache.commons.fileupload.FileItem"%>
<%@page import="java.util.List"%>
<%@page import="java.io.File"%>
<%@page import="org.apache.commons.fileupload.servlet.ServletFileUpload"%>
<%@page import="org.apache.commons.fileupload.DefaultFileItemFactory"%>
<%@ page contentType="text/html; charset=utf-8"%>
<%

		String saveDir = "D:/IT_Korea_Class/JavaEE/BoardApp/WebContent/data";
		int maxSize = 2*1024*1024;

		//업로드 객체를 생성해주는 팩토리 객체 (주로 설정담당 : 경로,용량제한 등)
		DefaultFileItemFactory itemFactory = new DefaultFileItemFactory();
		itemFactory.setRepository(new File(saveDir)); // 저장될 위치
		itemFactory.setSizeThreshold(maxSize);
		itemFactory.setDefaultCharset("utf-8");
		
		//실제 업로드를 수행하는 객체	
		ServletFileUpload upload = new ServletFileUpload(itemFactory);
		
		//request에는 현재 input type 2개의 정보가 담겨있고 이것이 List에는 2개의 FileItem이 담겨짐
		List<FileItem> items = upload.parseRequest(request); //업로드 컴포넌트에게 클라이언트의 요청정보를 전달
		
		for(FileItem item : items) {
			out.print(item.getFieldName()+"의 값은 ");
			out.print(item.getString()+"/t");
		}
		
		
%>
